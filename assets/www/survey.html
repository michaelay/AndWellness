<html>
<head>
   <meta name="viewport" content="height=device-height,width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=no;" />
   <link rel="stylesheet" href="http://m.ucla.edu/assets/css.php" type="text/css">
   <link rel="stylesheet" href="css/aws.css" type="text/css">
</head>
<body>

<h1 id="header" class="header center"></h1>

<div id="survey" class="webkit-transition-slideX">
<!--
   <div class="content-element webkit-transition-element aws-transition-element">
      <form class="form-full form-padded"> 
         <h1 class="light form-first">title</h1>
         <label for="123">asdf</label>
         <input type="text" name="a" id="a"/>
         <div class="webkit-transition-trigger-prev only-webkit">
            <a href="#">Previous</a>
         </div>
         <div class="webkit-transition-trigger-next only-webkit">
            <a href="#">Next</a>
         </div>
         <div><a href="surveylist.html">survey list</a></div>
      </form>
   </div>
-->
   <div class="content-full content-padded webkit-transition-element">
      <h1 id="desc-title"></h1>
      <p id="desc-content"></p>
      <div class="webkit-transition-trigger-next only-webkit">
         <a href="#">Begin</a>
      </div>
   </div>
<!--
   <div class="content-full content-padded webkit-transition-element">
      <h1>abdsafsdsaasdfas</h1>
      <p>content content content</p>
      <p>content content content</p>
      <p>content content content</p>
      <p>content content content</p>
      <div>
      <div class="webkit-transition-trigger-prev only-webkit">
         <a href="#">Previous</a>
      </div>
      <div class="webkit-transition-trigger-next only-webkit">
         <a href="#">Next</a>
      </div>
      </div>
   </div>
-->
</div>

<script src="http://m.ucla.edu/assets/js.php?webkit_libs=transitions"></script>
<script src="js/jquery-1.6.1.min.js"></script>
<script src="js/aws_campaign.js"></script>
<script src="js/aws_utility.js"></script>
<script>
$(document).ready(function() { 
   var loader = new CampaignXMLLoader(); 
   var xmlString = loader.loadDefaultCampaign(); 

   var id = $.getUrlVars()['id'];
   id = id.replace(/#$/, '');
   var $survey = $(xmlString).find("surveys > survey > id:contains('"+id+"')").parent();
   var $surveyEl = $("#survey");
   $("#desc-title").html($survey.find("title").text());
   $("#desc-content").html($survey.find("description").text());
   $survey.find("contentList").children().each(function() {
      //console.log($(this).find("promptText").text());
      var question = $(this).find("promptText").text();
      var newFormHTML = '\
   <div class="content-element webkit-transition-element aws-transition-element">\
      <form class="form-full form-padded">\
         <h1 class="light form-first">'+question+'</h1>\
         <label for="123">asdf</label>\
         <input type="text" name="a" id="a"/>\
         <div class="webkit-transition-trigger-prev only-webkit">\
            <a href="#">Previous</a>\
         </div>\
         <div class="webkit-transition-trigger-next only-webkit">\
            <a href="#">Next</a>\
         </div>\
         <div><a href="surveylist.html">survey list</a></div>\
      </form>\
   </div>';
      var $newForm = $(newFormHTML);
      $surveyEl.append($newForm);
   });
   //console.log(survey.text());
});
</script>

</body>
</html>
